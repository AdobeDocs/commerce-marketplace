(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[2e3],{22695:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return i},default:function(){return c}});var a=t(22122),o=t(19756),r=(t(15007),t(64983)),l=t(99536),s=["components"],i={},d=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",n)}},m=d("InlineAlert"),p=d("CodeBlock"),u={_frontmatter:i},x=l.Z;function c(e){var n=e.components,t=(0,o.Z)(e,s);return(0,r.mdx)(x,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"authentication"},"Authentication"),(0,r.mdx)(m,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"All API requests must be authenticated using ",(0,r.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Basic_access_authentication"},"HTTP Basic Authentication"),"."),(0,r.mdx)("p",null,"The Marketplace EQP API uses a two-step process to authenticate a client application and authorize access to resources:"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"Using your ",(0,r.mdx)("a",{parentName:"li",href:"access-keys.md"},"API access key"),", obtain a session token."),(0,r.mdx)("li",{parentName:"ol"},"Provide the session token as an HTTP Authorization Bearer header to access a resource.")),(0,r.mdx)("h2",{id:"base-urls"},"Base URLs"),(0,r.mdx)("p",null,"In code examples in this documentation, we use the Base URL of the ",(0,r.mdx)("a",{parentName:"p",href:"sandbox.md"},"sandbox"),"."),(0,r.mdx)("p",null,"Once you are confident your ",(0,r.mdx)("strong",{parentName:"p"},"sandbox")," API calls are correct, and you wish to submit a package for full manual review on the ",(0,r.mdx)("strong",{parentName:"p"},"production")," environment, do the following:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Use the ",(0,r.mdx)("strong",{parentName:"li"},"production")," Base URL instead of the sandbox one"),(0,r.mdx)("li",{parentName:"ul"},"Use your ",(0,r.mdx)("strong",{parentName:"li"},"production")," API access key: application ID and application secret")),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Environment"),(0,r.mdx)("th",{parentName:"tr",align:null},"Base Url"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"sandbox"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"https://developer-stg-api.magento.com"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"production"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"https://developer-api.magento.com"))))),(0,r.mdx)("h2",{id:"authentication-and-authorization-flow"},"Authentication and authorization flow"),(0,r.mdx)("p",null,"You must use your ",(0,r.mdx)("a",{parentName:"p",href:"access-keys.md"},"API access key")," -- which is an application ID and secret -- to obtain your session token.\nThe following is an example:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"application ID")," — ",(0,r.mdx)("inlineCode",{parentName:"li"},"AQ17NZ49WC")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"application secret")," — ",(0,r.mdx)("inlineCode",{parentName:"li"},"8820c99614d65f923df7660276f20e029d73e2ca"))),(0,r.mdx)("h3",{id:"how-to-obtain-a-session-token-session-token"},"How to obtain a session token {#session-token}"),(0,r.mdx)("p",null,"The following endpoint grants a session token:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-http"},"POST /rest/v1/app/session/token\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Parameters:")),(0,r.mdx)("p",null,"You must specify the grant type in the request body:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n   "grant_type": "session",\n   "expires_in": 7200\n}\n')),(0,r.mdx)("p",null,"Field details:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field"),(0,r.mdx)("th",{parentName:"tr",align:null},"Type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Required"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"grant_type")),(0,r.mdx)("td",{parentName:"tr",align:null},"string"),(0,r.mdx)("td",{parentName:"tr",align:null},"yes"),(0,r.mdx)("td",{parentName:"tr",align:null},"The API only supports the ",(0,r.mdx)("inlineCode",{parentName:"td"},"session")," grant type; other values will give an error.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"expires_in")),(0,r.mdx)("td",{parentName:"tr",align:null},"int"),(0,r.mdx)("td",{parentName:"tr",align:null},"no"),(0,r.mdx)("td",{parentName:"tr",align:null},"Specifies the number of seconds that the session token will be valid. If the requested time exceeds the system's maximum allowed, the system's maximum limit will be used instead.")))),(0,r.mdx)("p",null,"The following example shows a request to the sandbox, using the application ID and secret from above. A successful HTTP 200 OK response will be sent for a valid application ID and secret."),(0,r.mdx)(p,{slots:"heading, code",repeat:"2",languages:"CURL, JSON",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"request"},"Request"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-curl"},"curl -X POST \\\n     -u 'AQ17NZ49WC:8820c99614d65f923df7660276f20e029d73e2ca' \\\n     -H 'Content-Type: application/json' \\\n     -d '{ \"grant_type\" : \"session\" }' \\\n     https://developer-stg-api.magento.com/rest/v1/app/session/token\n")),(0,r.mdx)("h4",{id:"response"},"Response"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n "mage_id": "MAG123456789",\n "ust": "baGXoStRuR9VCDFQGZNzgNqbqu5WUwlr.cAxZJ9m22Le7",\n "expires_in": 7200\n}\n')),(0,r.mdx)("p",null,"Field details:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field"),(0,r.mdx)("th",{parentName:"tr",align:null},"Type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"mage_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"string"),(0,r.mdx)("td",{parentName:"tr",align:null},'Your user account.  This is your "Magento ID."')),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"ust")),(0,r.mdx)("td",{parentName:"tr",align:null},"string"),(0,r.mdx)("td",{parentName:"tr",align:null},"User Session Token. It will be used in the ",(0,r.mdx)("strong",{parentName:"td"},(0,r.mdx)("inlineCode",{parentName:"strong"},"Authorization: Bearer"))," header for all subsequent API calls.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"expires_in")),(0,r.mdx)("td",{parentName:"tr",align:null},"int"),(0,r.mdx)("td",{parentName:"tr",align:null},"Number of seconds the session token will be valid. Example: 7200 seconds is 2 hours.")))),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"The session token has a relatively short duration."),(0,r.mdx)("li",{parentName:"ul"},"You can get as many session tokens as you need.  You do ",(0,r.mdx)("strong",{parentName:"li"},"not")," need to wait for a session token to expire before requesting another one.  Multiple session tokens can be active at the same time, so you can run multiple scripts at the same time."),(0,r.mdx)("li",{parentName:"ul"},"Once the session token expires, a new token must be obtained as described above."),(0,r.mdx)("li",{parentName:"ul"},"Session tokens are specific to each environment.  Session tokens generated for the ",(0,r.mdx)("strong",{parentName:"li"},"sandbox")," cannot be used for ",(0,r.mdx)("strong",{parentName:"li"},"production"),", and vice-versa.")),(0,r.mdx)("h2",{id:"how-to-use-a-session-token"},"How to use a session token"),(0,r.mdx)("p",null,"After obtaining a valid session token, you must use it as an ",(0,r.mdx)("strong",{parentName:"p"},"authorization bearer token")," in all subsequent API calls.\nUsing the example values from above, run the following command to access your user profile with a session token:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"curl -X GET \\\n     -H 'Authorization: Bearer baGXoStRuR9VCDFQGZNzgNqbqu5WUwlr.cAxZJ9m22Le7' \\\n     https://developer-stg-api.magento.com/rest/v1/users/MAG123456789\n")))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-eqp-v-1-auth-md-3aeca9a3b5fa4cb3d5d6.js.map