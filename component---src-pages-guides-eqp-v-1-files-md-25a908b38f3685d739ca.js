(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9887],{19448:function(e,a,t){"use strict";t.r(a),t.d(a,{_frontmatter:function(){return m},default:function(){return g}});var n=t(22122),l=t(19756),d=(t(15007),t(64983)),r=t(99536),i=["components"],m={},p=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",a)}},o=p("CodeBlock"),s=p("InlineAlert"),u={_frontmatter:m},x=r.Z;function g(e){var a=e.components,t=(0,l.Z)(e,i);return(0,d.mdx)(x,(0,n.Z)({},u,t,{components:a,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"files"},"Files"),(0,d.mdx)("p",null,"Use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"files")," resource to manage all artifacts that you upload:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"Magento 2 ZIP files (.zip)"),(0,d.mdx)("li",{parentName:"ul"},"PDF documents for user guides, installation guides, and reference manuals"),(0,d.mdx)("li",{parentName:"ul"},"Product icons"),(0,d.mdx)("li",{parentName:"ul"},"Image files for galleries"),(0,d.mdx)("li",{parentName:"ul"},"Image files for your personal and company profile")),(0,d.mdx)("p",null,"Each file upload receives a unique ID. You must associate these IDs with your submission later using the ",(0,d.mdx)("a",{parentName:"p",href:"packages.md"},"packages API"),"."),(0,d.mdx)("p",null,"You can associate a file with multiple products. This allows for asset sharing across different packages.\nFor example, you can share an image file for a gallery with different packages by associating it with the same file upload ID."),(0,d.mdx)("p",null,"All files that you upload are inspected for malware.\nWe only accept packages for further review if all associated files have passed the malware inspection."),(0,d.mdx)("h2",{id:"file-uploads"},"File uploads"),(0,d.mdx)("p",null,"Use this API to upload files, retrieve file upload status, and remove files."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-http"},"GET /rest/v1/files/uploads/:file_upload_id\nPOST /rest/v1/files/uploads\n")),(0,d.mdx)("h3",{id:"get-a-file-upload"},"Get a file upload"),(0,d.mdx)("p",null,"Use the upload ID to retrieve details about a file upload."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-http"},"GET /rest/v1/files/uploads/:file_upload_id\n")),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Parameters:")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Field"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"file_upload_id")),(0,d.mdx)("td",{parentName:"tr",align:null},"URL element"),(0,d.mdx)("td",{parentName:"tr",align:null},"The ",(0,d.mdx)("inlineCode",{parentName:"td"},"file_upload_id")," string that was returned when uploading or listing the file.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"offset")),(0,d.mdx)("td",{parentName:"tr",align:null},"int"),(0,d.mdx)("td",{parentName:"tr",align:null},"Index of the first element to return in the response. Used for pagination.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"limit")),(0,d.mdx)("td",{parentName:"tr",align:null},"int"),(0,d.mdx)("td",{parentName:"tr",align:null},"Maximum number of list items to return in the response. Used for pagination.")))),(0,d.mdx)("p",null,"Sorting and filtering parameters are currently not available for this endpoint."),(0,d.mdx)("p",null,"If the ",(0,d.mdx)("inlineCode",{parentName:"p"},"file_upload_id")," parameter is specified, a single file record will be returned.\nIf it is omitted, then a batch response will be returned: an array of records for all files uploaded by the current user."),(0,d.mdx)(o,{slots:"heading, code",repeat:"2",languages:"CURL, JSON",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"request"},"Request"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-curl"},"curl -X GET \\\n     -H 'Authorization: Bearer baGXoStRuR9VCDFQGZNzgNqbqu5WUwlr.cAxZJ9m22Le7' \\\n     https://developer-stg-api.magento.com/rest/v1/files/uploads/5c129cd41ba478.65767699.1\n")),(0,d.mdx)("h4",{id:"response"},"Response"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "file_upload_id" : "5c129cd41ba478.65767699.1",\n    "filename" : "icon.png",\n    "content_type" : "image/png",\n    "size" : 123456,\n    "malware_status" : "pass",\n    "file_hash" : "f53f5db985b8815f1ce6fd4b48a0439a",\n    "submission_ids" : [\n    ],\n    "is_profile_image" : false,\n    "url" : "https://mp-stg-static.magento.com/user/68/f3/68f360d3516f594fc957c4179ed4a7a872911f07/pub/f5/3f/f53f5db985b8815f1ce6fd4b48a0439a/icon.png"\n}\n')),(0,d.mdx)("p",null,"Response field details:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Field"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"file_upload_id")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Unique identifier for the file.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"filename")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The name of the file sent in the request.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"content_type")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The mime-type for which the file was uploaded.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"size")),(0,d.mdx)("td",{parentName:"tr",align:null},"integer"),(0,d.mdx)("td",{parentName:"tr",align:null},"The size of the file in bytes.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"malware_status")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Malware check result for this file. Valid values include: ",(0,d.mdx)("inlineCode",{parentName:"td"},"pass"),", ",(0,d.mdx)("inlineCode",{parentName:"td"},"fail"),", ",(0,d.mdx)("inlineCode",{parentName:"td"},"in-progress"),".")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"file_hash")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Hash of the file; currently md5. Only set if malware_status is ",(0,d.mdx)("inlineCode",{parentName:"td"},"pass"),".")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"url")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The URL from which the file may be downloaded, if applicable.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"submission_ids")),(0,d.mdx)("td",{parentName:"tr",align:null},"array"),(0,d.mdx)("td",{parentName:"tr",align:null},"The list of package submissions associated with this file, if any.")))),(0,d.mdx)("p",null,"The order of fields may differ, and additional fields may also be returned."),(0,d.mdx)("h3",{id:"upload-files"},"Upload files"),(0,d.mdx)("p",null,"Upload files in bulk using the ",(0,d.mdx)("strong",{parentName:"p"},"multipart/form-data")," encoding type.\nWith this approach, binary files can be uploaded without the need for additional encoding, which could otherwise result in an increase in overall upload size."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-http"},"POST /rest/v1/files/uploads\n")),(0,d.mdx)("p",null,"A sample request body of mime type, ",(0,d.mdx)("a",{parentName:"p",href:"https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2"},"multipart/form-data"),"\nwith a boundary string of ",(0,d.mdx)("inlineCode",{parentName:"p"},"UNIQUE_BOUNDARY_TOKEN")," is shown below:"),(0,d.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"The boundary marker must be part of the request ",(0,d.mdx)("strong",{parentName:"p"},"Content-Type")," header and it must be a single line with no line breaks."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-http"},"Content-Type: multipart/form-data; boundary=UNIQUE_BOUNDARY_TOKEN\n")),(0,d.mdx)("p",null,"For more info on multipart/form-data requests, see the ",(0,d.mdx)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc2046#section-5.1"},"IETF specification")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-text"},'--UNIQUE_BOUNDARY_TOKEN\nContent-Disposition: form-data; name="file[]"; filename="acme_one-click-checkout.zip"\nContent-Type: application/zip\n\n<zip file content here.....>\n\n--UNIQUE_BOUNDARY_TOKEN\nContent-Disposition: form-data; name="file[]"; filename="icon.png"\nContent-Type: image/png\n\n<image file content here.....>\n\n--UNIQUE_BOUNDARY_TOKEN\nContent-Disposition: form-data; name="file[]"; filename="acme-logo.png"\nContent-Type: image/png\n\n<image file content here.....>\n\n--UNIQUE_BOUNDARY_TOKEN\nContent-Disposition: form-data; name="file[]"; filename="user.pdf"\nContent-Type: application/pdf\n\n<pdf file content here....>\n\n--UNIQUE_BOUNDARY_TOKEN--\n')),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"Each part has a header and body."),(0,d.mdx)("li",{parentName:"ul"},"The body of each part is the full contents of the raw file."),(0,d.mdx)("li",{parentName:"ul"},"The header has the following required elements:")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Element"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Content-Disposition"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"MUST be ",(0,d.mdx)("inlineCode",{parentName:"td"},"form-data"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"name"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"MUST be ",(0,d.mdx)("inlineCode",{parentName:"td"},"file[]")," for all parts.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"filename"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Should be the original name of the file.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Content-Type"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Should be the correct mime-type for the file.")))),(0,d.mdx)("p",null,"Recognized Content-Types"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"File Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Recognized Content-Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Usage"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"png"),(0,d.mdx)("td",{parentName:"tr",align:null},"image/png"),(0,d.mdx)("td",{parentName:"tr",align:null},"avatar, gallery")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"jpg / jpeg"),(0,d.mdx)("td",{parentName:"tr",align:null},"image/jpeg"),(0,d.mdx)("td",{parentName:"tr",align:null},"avatar, gallery")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"gif"),(0,d.mdx)("td",{parentName:"tr",align:null},"image/gif"),(0,d.mdx)("td",{parentName:"tr",align:null},"avatar")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"pdf"),(0,d.mdx)("td",{parentName:"tr",align:null},"application/pdf"),(0,d.mdx)("td",{parentName:"tr",align:null},"document")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"zip"),(0,d.mdx)("td",{parentName:"tr",align:null},"application/zip"),(0,d.mdx)("td",{parentName:"tr",align:null},"package")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"zip"),(0,d.mdx)("td",{parentName:"tr",align:null},"application/x-zip-compressed"),(0,d.mdx)("td",{parentName:"tr",align:null},"package")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"zip"),(0,d.mdx)("td",{parentName:"tr",align:null},"application/octet-stream"),(0,d.mdx)("td",{parentName:"tr",align:null},"package")))),(0,d.mdx)("p",null,"If the request body given above was saved into a temporary file at ",(0,d.mdx)("inlineCode",{parentName:"p"},"/tmp/files-payload"),",\nyou may use it in your POST request to upload the files:"),(0,d.mdx)(o,{slots:"heading, code",repeat:"2",languages:"CURL, JSON",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"request-1"},"Request"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-curl"},"curl -X POST \\\n     -H 'Authorization: Bearer baGXoStRuR9VCDFQGZNzgNqbqu5WUwlr.cAxZJ9m22Le7' \\\n     -H \"Content-Type: multipart/form-data; boundary=UNIQUE_BOUNDARY_TOKEN\" \\\n     --data-binary  @/tmp/files-payload \\\n     https://developer-stg-api.magento.com/rest/v1/files/uploads\n")),(0,d.mdx)("h4",{id:"response-1"},"Response"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "filename" : "acme_one-click-checkout.zip",\n    "content_type" : "application/zip",\n    "size" : 182934,\n    "file_upload_id" : "5c11e656057b42.97931218.5"\n  },\n\n  {\n    "filename" : "icon.png",\n    "content_type" : "image/png",\n    "size" : 37492,\n    "file_upload_id" : "5c129cd41ba478.65767699.1"\n  },\n\n  {\n    "filename" : "acme-logo.png",\n    "content_type" : "image/png",\n    "size" : 6825,\n    "file_upload_id" : "5c644fa344e5d7.04253635.8"\n  },\n\n  {\n    "filename" : "user.pdf",\n    "content_type" : "application/pdf",\n    "size" : 48392,\n    "file_upload_id" : "5c644d97bb7c41.37505716.6"\n  }\n]\n')),(0,d.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"The response is the list of files in the same order sent during the upload request."),(0,d.mdx)("p",null,"Each record in the list has the following fields:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Field"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"filename"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The name of the file sent in the request.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"content-type"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The mime-type of the uploaded file.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"size"),(0,d.mdx)("td",{parentName:"tr",align:null},"integer"),(0,d.mdx)("td",{parentName:"tr",align:null},"The size of the file in bytes.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"file_upload_id"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"A unique identifier for the file.")))),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"file_upload_id")," must be tracked for subsequent package submission API endpoints."))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-eqp-v-1-files-md-25a908b38f3685d739ca.js.map